{% extends "SioSemiBundle::layout.html.twig" %}

{% block content %}
{% trans_default_domain 'FOSUserBundle' %}
<div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title" style="text-align: center">Ma fiche</h3>
    </div>
    <div class="panel-body">
      <form class="form-horizontal" role="form" action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form) }} method="post"> 

    {{ form_widget(form) }}
 {#
    {{ form_errors(form) }}
       
       <div class="form-group">
        {{ form_label(form.email, {'attr': {'class': 'col-sm-2 control-label'}}) }}
        <div class="col-sm-10">
        {{ form_errors(form.email) }}
        {{ form_widget(form.email, {'attr': {'class': 'form-control'}})}}
        </div>
      </div>
           
      #}          
                <div>
        <input type="submit" value="{{ 'registration.submit'|trans }}" />
      </div>
    </form>
    </div> <!-- panel-body -->
 </div>
{#
  <form action="{{ path('fos_user_registration_register') }}"  method="POST" class="fos_user_registration_register">
    <div id="fos_user_registration_form" >
      <div><label for="fos_user_registration_form_email" class="required">Email:</label>
        <input type="email" id="fos_user_registration_form_email" 
               name="fos_user_registration_form[email]" required="required" />
      </div>
      <div><label for="fos_user_registration_form_username" class="required">Username:</label>
        <input type="text" id="fos_user_registration_form_username" 
               name="fos_user_registration_form[username]" required="required" maxlength="255" pattern=".{2,}" />
      </div>
      <div><label for="fos_user_registration_form_plainPassword_first" class="required">Password:</label>
        <input type="password" id="fos_user_registration_form_plainPassword_first" 
               name="fos_user_registration_form[plainPassword][first]" required="required" />
      </div>
      <div><label for="fos_user_registration_form_plainPassword_second" class="required">Repeat password:</label>
        <input type="password" id="fos_user_registration_form_plainPassword_second" 
               name="fos_user_registration_form[plainPassword][second]" required="required" />
      </div>
      <input type="hidden" id="fos_user_registration_form__token" 
             name="fos_user_registration_form[_token]" 
             value="{{token}}" /></div>
    <div>
      <input type="submit" value="Register" />
    </div>
  </form>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title" style="text-align: center">Ma fiche</h3>
    </div>
    <div class="panel-body">
      <form class="form-horizontal" role="form" action="{{ path('fos_user_registration_register') }}" method="post"> 

        <div class="form-group">
          <label for="lastname" class="col-sm-2 control-label">Nom</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="lastname" name="lastname"
                   placeholder="Nom" value="{{user.lastName}}">
          </div>
        </div>

        <div class="form-group">
          <label for="firstname" class="col-sm-2 control-label">Prénom</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="firstname" name="firstname"
                   placeholder="Prénom" value="{{user.firstName}}">
          </div>
        </div>
        <div class="form-group">
          <label for="pass1" class="col-sm-2 control-label">Mot de passe
            {% if user.password %}
              (optionnel)
            {% endif %} 
          </label>
          <div class="col-sm-10">
            <input type="password" class="form-control" name="pass1" id="pass1">
          </div>
        </div>
        <div class="form-group">
          <label for="pass2" class="col-sm-2 control-label">Confirmez votre mot de passe (si changement)
          </label>
          <div class="col-sm-10">
            <input type="password" class="form-control" name="pass2" id="pass2">
          </div>
        </div>
        {% if organisations is defined %}
          <div class="form-group" name="organisation">
            <label for="State" class="col-sm-2 control-label">Académie</label>
            <div class="col-sm-10">
              <select class="form-control" name="organisation">
                <option disabled selected>Sélectionner votre {{ paramOrganisation.value }}</option>
                <option disabled></option>
                {% for organisation in organisations %}
                  <option value="{{ organisation.id }}"
                          {% if user is defined and user.organisation and organisation.id == user.organisation.id %}
                            selected
                          {% endif %}
                          >
                    {{ organisation.name }} 
                  </option>
                {% endfor %}
              </select>
            </div>
          </div>
        {% endif %}   

        <div class="form-group">
          <label for="familyCity" class="col-sm-2 control-label">Ville de résidence </label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="familyCity" name="familyCity" value="{{user.homeCity}}">
          </div>
        </div>
        {% if app.user.email is not defined %} <!-- email is key, no change. -->
          <div class="form-group">
            <label for="mail" class="col-sm-2 control-label">mail</label>
            <div class="col-sm-10">
              <div class="input-group input-group-sm">
                <span class="input-group-addon">@</span>
                <input type="email" class="form-control" placeholder="Votre email" name="mail" id="mail" value="{{ mail }}" readonly />
              </div>
            </div> 
          </div> 
          <div class="form-group">
            <label for="mail2" class="col-sm-2 control-label">mail confirmation</label>
            <div class="col-sm-10">
              <div class="input-group input-group-sm">
                <span class="input-group-addon">@</span>
                <input type="email" class="form-control" placeholder="Votre email" name="mail2" id="mail2">
              </div>
            </div> 
          </div> 
        {% endif %}  

        {% if clef is not empty %}
          <div class="form-group">
            <label for="clef" class="col-sm-2 control-label">Clef du séminaire</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="clef" name="clef"
                     placeholder="" value="{{clef}}" readonly>
            </div>
          </div> 
        {% endif %}

        <br>
        {% if not allStatus is empty %}

          <div class="form-group">
            <label class="col-sm-2 control-label">Pour ce séminaire, vous participez en tant que ?</label>
            <div class="col-sm-10">
              {% for tab in allStatus %}
                {% for object in tab %}        
                  <div class="radio-inline">
                    <label>
                      <input id="{{ object.status }}" name="status" 
                             value="{{ object.status }}" type="radio"
                             {% if object.status == userStatus %}
                               checked
                             {% endif %}    
                             />
                      {{ object.status }}</label>
                  </div>
                {% endfor %}
              {% endfor %}
            </div>    
          </div>   
        {% endif %}

        <div class="panel-footer" style="overflow:hidden;text-align:right;">
          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <button type="submit" class="btn btn-success btn-sm">Valider</button>
              <button type="submit" class="btn btn-default btn-sm">Annuler</button>
            </div>
          </div>  
        </div> 
      </form>
    </div>
  </div>
#}
{% endblock %}