{% set menuItemProfile = "profil" %}

{% extends "SioSemiBundle::layout.html.twig" %}

{% block content %}
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title" style="text-align: center">Enregistrement</h3>
    </div>
    <div class="panel-body">
      {{ form_start(form, {'attr': {'role': 'form', 'class' : 'form-horizontal'}})}}
      {{ form_errors(form) }}

      <div class="form-group">
        {{ form_label(form.lastName, 'Nom', {'label_attr': {'class': 'col-sm-2 control-label'}})}}
        {{ form_errors(form.lastName) }}
        <div class="col-sm-10">
          {{ form_widget(form.lastName, {'attr': {'class': 'form-control'}}) }}
        </div>
      </div>

      <div class="form-group">
        {{ form_label(form.firstName, 'Prénom' , {'label_attr': {'class': 'col-sm-2 control-label'}}) }}
        {{ form_errors(form.firstName) }}
        <div class="col-sm-10">
          {{ form_widget(form.firstName, {'attr': {'class': 'form-control'}}) }}
        </div>
      </div>
      <div class="form-group">
        {{ form_label(form.homeCity, 'Ville de résidence', {'label_attr': {'class': 'col-sm-2 control-label'}} ) }}
        {{ form_errors(form.homeCity) }}
        <div class="col-sm-10">
          {{ form_widget(form.homeCity , {'attr': {'class': 'form-control'}})}}
        </div>
      </div>
      <div class="form-group">
        <label for="email" class="col-sm-2 control-label">Email</label>
        <div class="col-sm-10">
          <input type="email" class="form-control" readonly
                 name="email" id="email" value="{{userEmail}}">
        </div>
      </div>
      <div class="form-group">
        {{ form_label(form.organisation, 'Académie', {'label_attr': {'class': 'col-sm-2 control-label'}})}}
        <div class="col-sm-10">
          {{ form_widget(form.organisation, {'attr': {'class': 'form-control'}}) }}
        </div>
      </div>

      <div class="form-group">
        {{ form_label(form.pass1, 'Mot de passe', {'label_attr': {'class': 'col-sm-2 control-label'}})}}
        <div class="col-sm-10">
          {{ form_widget(form.pass1, {'attr': {'class': 'form-control'}}) }}          
        </div>        
      </div>

      <div class="form-group">
        {{ form_label(form.pass2, 'Confirmer votre mot de passe', {'label_attr': {'class': 'col-sm-2 control-label'}})}}
        <div class="col-sm-10">
          {{ form_widget(form.pass2, {'attr': {'class': 'form-control'}}) }}          
        </div>        
      </div>
        
    </div>
  
  <div class="panel-footer" style="overflow:hidden;text-align:right;">
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        {{ form_widget(form.Valider, {'attr': {'class': 'btn btn-success btn-sm'}}) }}
        {#{ form_widget(form.Abandonner, {'attr': {'class': 'btn btn-default btn-sm'}}) }#}
        <!--button type="submit" id="btvalid" name="btvalid" class="btn btn-success btn-sm">Valider</button-->
        <button type="cancel" id="btcancel" name="btcancel" class="btn btn-default btn-sm">Annuler (ou retour login ?)</button-->
      </div>
    </div>  
  </div> 

  {{ form_end(form) }}
</div> 

{# {% endblock %} #}
{#

<div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title" style="text-align: center">Ma fiche</h3>
    </div>
    <div class="panel-body">
      <form class="form-horizontal" role="form" action="{{ path('fos_user_registration_register') }}" method="post"> 

        <div class="form-group">
          <label for="lastname" class="col-sm-2 control-label">Nom</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="lastname" name="lastname"
                   placeholder="Nom" value="{{user.lastName}}">
          </div>
        </div>

        <div class="form-group">
          <label for="firstname" class="col-sm-2 control-label">Prénom</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="firstname" name="firstname"
                   placeholder="Prénom" value="{{user.firstName}}">
          </div>
        </div>
        <div class="form-group">
          <label for="pass1" class="col-sm-2 control-label">Mot de passe
           {% if user.password %}
             (optionnel)
           {% endif %} 
            </label>
          <div class="col-sm-10">
            <input type="password" class="form-control" name="pass1" id="pass1">
          </div>
        </div>
        <div class="form-group">
          <label for="pass2" class="col-sm-2 control-label">Confirmez votre mot de passe (si changement)
          </label>
          <div class="col-sm-10">
            <input type="password" class="form-control" name="pass2" id="pass2">
          </div>
        </div>
        {% if organisations is defined %}
          <div class="form-group" name="organisation">
            <label for="State" class="col-sm-2 control-label">Académie</label>
            <div class="col-sm-10">
              <select class="form-control" name="organisation">
                <option disabled selected>Sélectionner votre {{ paramOrganisation.value }}</option>
                <option disabled></option>
                {% for organisation in organisations %}
                  <option value="{{ organisation.id }}"
                    {% if user is defined and user.organisation and organisation.id == user.organisation.id %}
                      selected
                    {% endif %}
                  >
                  {{ organisation.name }} 
                  </option>
                {% endfor %}
              </select>
            </div>
          </div>
        {% endif %}   

        <div class="form-group">
          <label for="familyCity" class="col-sm-2 control-label">Ville de résidence </label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="familyCity" name="familyCity" value="{{user.homeCity}}">
          </div>
        </div>
        {% if app.user.email is not defined %} 
          <div class="form-group">
            <label for="mail" class="col-sm-2 control-label">mail</label>
            <div class="col-sm-10">
              <div class="input-group input-group-sm">
                <span class="input-group-addon">@</span>
                <input type="email" class="form-control" placeholder="Votre email" name="mail" id="mail" value="{{ mail }}" readonly />
              </div>
            </div> 
          </div> 
          <div class="form-group">
            <label for="mail2" class="col-sm-2 control-label">mail confirmation</label>
            <div class="col-sm-10">
              <div class="input-group input-group-sm">
                <span class="input-group-addon">@</span>
                <input type="email" class="form-control" placeholder="Votre email" name="mail2" id="mail2">
              </div>
            </div> 
          </div> 
        {% endif %}  

        {% if clef is not empty %}
          <div class="form-group">
            <label for="clef" class="col-sm-2 control-label">Clef du séminaire</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="clef" name="clef"
                     placeholder="" value="{{clef}}" readonly>
            </div>
          </div> 
        {% endif %}

        <br>
        {% if not allStatus is empty %}

          <div class="form-group">
            <label class="col-sm-2 control-label">Pour ce séminaire, vous participez en tant que ?</label>
            <div class="col-sm-10">
              {% for tab in allStatus %}
                {% for object in tab %}        
                  <div class="radio-inline">
                    <label>
                      <input id="{{ object.status }}" name="status" 
                             value="{{ object.status }}" type="radio"
                           {% if object.status == userStatus %}
                             checked
                            {% endif %}    
                      />
                      {{ object.status }}</label>
                  </div>
                {% endfor %}
              {% endfor %}
            </div>    
          </div>   
        {% endif %}

        <div class="panel-footer" style="overflow:hidden;text-align:right;">
          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <button type="submit" class="btn btn-success btn-sm">Valider</button>
              <button type="submit" class="btn btn-default btn-sm">Annuler</button>
            </div>
          </div>  
        </div> 
      </form>
    </div>
  </div>
#}
{% endblock %}

